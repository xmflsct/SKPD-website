---
import { getCollection } from 'astro:content'
const menus = await getCollection('eventTypes')
const currentPath = Astro.url.pathname
---

<header
  class='sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 py-3 -mx-6 px-6 mb-4'
>
  <!-- Mobile menu button -->
  <button 
    id='mobile-menu-button'
    class='md:hidden flex items-center justify-center w-10 h-10 rounded-lg hover:bg-gray-100 transition-colors'
    aria-label='Toggle menu'
    aria-expanded='false'
  >
    <svg class='w-6 h-6' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
      <path id='menu-icon' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 6h16M4 12h16M4 18h16'></path>
      <path id='close-icon' class='hidden' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'></path>
    </svg>
  </button>

  <!-- Navigation -->
  <nav id='nav-menu' class='hidden md:flex flex-col md:flex-row md:justify-center md:items-center gap-1 md:gap-6 mt-3 md:mt-0 text-sm font-medium'>
    <a href='/' class:list={['nav-link', { active: currentPath === '/' }]}>Home</a>
    {menus.map(menu => (
      <a 
        href={`/${menu.data.data.slug}`} 
        class:list={['nav-link', { active: currentPath === `/${menu.data.data.slug}` }]}
      >
        {menu.data.data.name}
      </a>
    ))}
    <a href='/archief' class:list={['nav-link', { active: currentPath === '/archief' }]}>Archief</a>
    <a href='/over-skpd' class:list={['nav-link', { active: currentPath === '/over-skpd' }]}>Over SKPD</a>
  </nav>
</header>

<style>
  .nav-link {
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    color: #374151;
  }
  .nav-link:hover {
    background-color: #f3f4f6;
    color: #003a97;
    text-decoration: none;
  }
  .nav-link.active {
    background-color: #003a97;
    color: white;
  }
  .nav-link.active:hover {
    background-color: #002d7a;
    color: white;
  }

  @media (max-width: 767px) {
    .nav-link {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
    }
  }
</style>

<script>
  document.addEventListener('astro:page-load', () => {
    const button = document.getElementById('mobile-menu-button')
    const nav = document.getElementById('nav-menu')
    const menuIcon = document.getElementById('menu-icon')
    const closeIcon = document.getElementById('close-icon')

    button?.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true'
      button.setAttribute('aria-expanded', (!isExpanded).toString())
      nav?.classList.toggle('hidden')
      nav?.classList.toggle('flex')
      menuIcon?.classList.toggle('hidden')
      closeIcon?.classList.toggle('hidden')
    })
  })
</script>
