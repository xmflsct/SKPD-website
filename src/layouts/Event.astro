---
import { documentToHtmlString } from '@contentful/rich-text-html-renderer'
import { Image } from 'astro:assets'
import { richTextOptions } from '../lib/richTextOptions'
import type { CollectionEntry } from 'astro:content'

interface Props {
  event: CollectionEntry<'events'>['data']
}

const {
  event: { data }
} = Astro.props
---

<div class='border-b mb-6'>
  <h1>{data.name}</h1>

  <div>
    ðŸ“… {data.dateStart} - {data.dateEnd}
  </div>

  {
    data.featuredImage && (
      <Image
        src={data.featuredImage.fields.file.url + `?w=782&q=80&fm=jpg&fl=progressive`}
        alt={data.featuredImage.fields.title}
        width={782}
        height={
          (782 / data.featuredImage.fields.file.details.image.width) *
          data.featuredImage.fields.file.details.image.height
        }
      />
    )
  }

  {
    data.description && (
      <article set:html={documentToHtmlString(data.description, richTextOptions)} />
    )
  }
</div>
